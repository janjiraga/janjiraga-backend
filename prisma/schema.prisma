generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Event {
    id              String   @id @default(cuid())
    slug            String   @unique
    name            String
    price           Int?
    imageUrl        String?  @db.Text
    description     String?  @db.Text
    venueName       String
    venueAddress    String
    latitude        Float
    longitude       Float
    zoomLevel       Int
    maxParticipants Int?
    dateTimeStart   DateTime
    dateTimeEnd     DateTime

    category   Category @relation(fields: [categoryId], references: [id])
    categoryId String

    user   User?   @relation(fields: [userId], references: [id])
    userId String?

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model Category {
    id     String  @id @default(cuid())
    name   String  @unique
    events Event[]
}

model User {
    id String @id @default(cuid())

    username  String @unique
    email     String @unique
    firstName String
    lastName  String

    password Password?

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    event Event[]
}

model Password {
    id String @id @default(cuid())

    hash String

    user   User   @relation(fields: [userId], references: [id])
    userId String @unique

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}
